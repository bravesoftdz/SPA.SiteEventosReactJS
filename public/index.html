<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="keywords" content="expo, event, 2020, shows" />
    <meta property="og:url" content="http://www.expoevent.com.br" />
    <meta property="og:description" content="Expo Event | O maior evento para gestão de SPA´s contruidas em React" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />
    <link rel="apple-touch-icon" href="logo192.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <title>Expo Event 2020</title>
    <script type="text/javascript" src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
    
    <script type="text/javascript">
      (function(){
          emailjs.init("user_TSLzB8dCPqTfGxWMJXNIF");
      })();
    </script>
    <script type="text/javascript">
      window.onload = function() {
          document.getElementById('contact-form').addEventListener('submit', function(event) {
              event.preventDefault();
              // generate the contact number value
              this.contact_number.value = Math.random() * 100000 | 0;
              emailjs.sendForm('contato_agripoint', 'template_ff3W3H2K', this);
          });
      }
  </script>
  </head>
  <body>
    <script type="text/javascript">
      window.onscroll = function() {progressoRolagem()};
      function progressoRolagem() {
        var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        var scrolled = (winScroll / height) * 100;
        document.getElementById("progress-bar").style.width = scrolled + "%";
      }

       // inicializa o carrinho
       var carrinho = new Array();
        var almoco = 'almoco';
        var mastite = 'mastite';
        var isulp = 'isul-profissional';
        var isule = 'isul-estudante';
        var codigoIsul = 'isul';

        // inicializa a lista de produtos disponiveis para venda concatenção
        var produtos = {};
        produtos[almoco] = { nome: "Almoço ISUL", valor: 75.00, idProduto: 1623, idTipo: 0, codigo: 'almoco' };
        produtos[mastite] = { nome: "Exp. Mastite", valor: 195.00, idProduto: 1626, idTipo: 0, codigo: 'mastite' };
        produtos[isulp] = { nome: "ISUL. Prof", valor: 312.00, idProduto: 1624, idTipo: 1274, codigo: codigoIsul }; 
        produtos[isule] = {nome: "ISUL. Est", valor: 200.00, idProduto: 1624, idTipo: 1275, codigo: codigoIsul };

        // ao clicar para adicionar um produto ao carrinho
        function AdicionarProduto(el, produto)
        {
            // se o produto já existir no carrinho
            if (carrinho.indexOf(produtos[produto]) > -1)
            {
                // remover classes
                RemoverProduto(produto);

                // volta o botão a classe original
                $(el).addClass('btn-amarelo');

                // se removeu o isul (estudante ou profissional, não interessa) bloqueia a compra do almoço 
                if (produtos[produto].codigo == codigoIsul)
                    BloquearAlmoco();
            }

            else
            {
                // se adicinou o isul (estudante ou profissional, não interessa)
                if (produtos[produto].codigo == codigoIsul)
                {
                    // volta a cor original de todos os botoes referentes ao isul
                    $('.btn-isul').addClass('btn-amarelo');

                    // remove os produtos do interleite, pois vamos adicionar mais abaixo e apenas um deles deve estar no carrinho
                    RemoverProduto(isulp);
                    RemoverProduto(isule);

                    // libera a compra o almoço 
                    HabilitarAlmoco();
                }

                // adicionar classes
                carrinho.push(produtos[produto]);

                // ativa o botão
                AtivarBotaoProduto(el);
            }

            // se houver produtos no carrinho, libera a compra
            if (carrinho.length > 0)
                HabilitarCompra();
            else
                BloquearCompra();
        }

        // remove um produto do carrinho
        function RemoverProduto(produto)
        {
            // encontra o elemente, se existe, remove do carrinho
            var index = carrinho.indexOf(produtos[produto]);
            if (index > -1)
                carrinho.splice(index, 1);
        }

        // ativa (marcando como selecionado o botão que foi acionado para compra do produto)
        function AtivarBotaoProduto(el)
        {
            $(el).removeClass('btn-amarelo');
            $(el).addClass('btn-ativado');
        }

        // habilita o botão de compra
        function HabilitarCompra()
        {
             $('#btnComprar').removeClass('desativado');
             $('#btnComprar').removeAttr("disabled");
        }

        // bloqueia a compra
        function BloquearCompra()
        {
            $('#btnComprar').addClass('desativado');
            $('#btnComprar').attr("disabled", true);
        }

        // habilita o botão de almoço para seleção
        function HabilitarAlmoco() {
            $('#btnAlmoco').removeAttr("disabled");
        }

        // bloqueia o almoço - significa que também temos que remove-lo do carrinho
        function BloquearAlmoco() {

            $('#btnAlmoco').attr("disabled", true);
            $('#btnAlmoco').addClass('btn-amarelo');
            $('#btnAlmoco').removeClass('btn-ativado');
            RemoverProduto(almoco);
        }
        
        // finaliza a compra
        function FinalizarCompra()
        {
            var linkPadrao = "https://www.agripoint.com.br/vendas/pedRecebe.aspx?" +
            "nomeLoja=MilkPoint&urlOrigem=http://www.interleite.com.br/" +
             "&urlLogotipo=https://www.agripoint.com.br/logos/milk.jpg&naoMostrarCesta=0";

            var linkProduto = '';

            // para cada produto do carrinho
            $.each(carrinho, function (i) { 

                // define o indice começando por 1
                var indice = i + 1;

                // monta o produto
                linkProduto += '&produto' + indice + '=' + carrinho[i].idProduto;

                // adiciona o tipo, se houver
                if (carrinho[i].idTipo > 0)
                    linkProduto += '&tipo' + indice + '=' + carrinho[i].idTipo;

                // adiciona a quantidade
                linkProduto += '&quantidade=1';

            });

            // finaliza o link unindo a versão padrão com o link gerado automaticamente com base nos produtos que estão no carrinho
            var linkFinal = linkPadrao + linkProduto;

            // direciona para a página final
            window.open(linkFinal, '_blank');
        }
        




    </script>
    <div id="root"></div>
  </body>
</html>